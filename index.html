<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<title>Collectiv Design Portfolio – 10 Mockups</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<style>
  :root {
    --bg:#F0E6D2;
    --dark:#1A1423;
    --accent:#C25E32;
    --teal:#5A8B7C;
    --muted:#816B58;
    --paper:#FFF9F4;
    --radius:18px;
    --shadow:0 40px 110px -14px rgba(26,20,35,.15);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",serif;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    background:var(--bg);
    color:var(--dark);
    overscroll-behavior:contain;
    position:relative;
    min-height:100%;
    padding-bottom:80px;
  }
  h1{margin:0;font-size:2rem;font-weight:700;line-height:1.1;}
  h2{margin:0;font-size:1.5rem;font-weight:700;margin-bottom:4px;}
  p{margin:6px 0 14px;font-size:1rem;line-height:1.4;}
  small{font-size:.7em;color:rgba(26,20,35,.65);}
  .section{
    position:relative;
    padding:60px 18px 80px;
    max-width:1120px;
    margin:0 auto;
  }
  .label{
    display:inline-block;
    padding:6px 12px;
    border-radius:999px;
    background:rgba(194,94,50,.08);
    font-size:.65em;
    font-weight:600;
    margin-bottom:6px;
    letter-spacing:1px;
  }
  /* painterly panel base */
  .panel{
    position:relative;
    background:var(--paper);
    padding:28px 30px 32px;
    margin:28px 0;
    filter:drop-shadow(var(--shadow));
    overflow:hidden;
    border-radius:30px;
  }
  .brushy{
    font-family: 'Segoe Script', cursive;
  }
  .fake-handwritten{
    position:relative;
  }
  .handdrawn-title{
    position:relative;
    display:inline-block;
    font-size:1.6rem;
    font-weight:700;
    margin-bottom:6px;
  }
  .subtitle{
    font-size:.95rem;
    margin-top:4px;
    margin-bottom:12px;
    color:rgba(26,20,35,.8);
  }
  .btn{
    background:var(--accent);
    color:#fff;
    border:none;
    padding:12px 22px;
    border-radius:999px;
    cursor:pointer;
    font-weight:600;
    display:inline-flex;
    align-items:center;
    gap:6px;
    transition:transform .2s;
  }
  .btn:hover{transform:scale(1.02);}
  .secondary{
    background:var(--teal);
  }
  .pill{
    background:rgba(26,20,35,.08);
    padding:6px 14px;
    border-radius:999px;
    font-size:.65em;
    display:inline-block;
    margin-right:6px;
    margin-bottom:4px;
  }
  input, textarea{
    width:100%;
    padding:12px 14px;
    border-radius:12px;
    border:2px solid rgba(26,20,35,.12);
    font-size:1rem;
    outline:none;
    resize:vertical;
    background:#fff;
    transition:border .2s,box-shadow .2s;
  }
  input:focus, textarea:focus{border-color:var(--accent);box-shadow:0 6px 30px rgba(194,94,50,.15);}
  .flow-path{
    width:100%;
    height:200px;
  }
  .contrast-wrapper{
    position:relative;
    margin-top:14px;
    overflow:hidden;
    border-radius:24px;
    display:flex;
    gap:0;
  }
  .contrast-half{
    flex:1;
    padding:24px;
    position:relative;
    min-height:160px;
  }
  .blend{
    position:absolute;
    inset:0;
    pointer-events:none;
    mix-blend-mode:overlay;
    background:linear-gradient(135deg,rgba(194,94,50,.05) 0%,rgba(90,139,124,.07)100%);
  }
  .future-card{
    position:relative;
    padding:24px;
    border-radius:28px;
    background:var(--paper);
    filter:drop-shadow(var(--shadow));
    display:flex;
    gap:20px;
    flex-wrap:wrap;
  }
  .fold{
    position:absolute;
    top:0;right:0;
    width:80px;
    height:80px;
    background:rgba(26,20,35,.05);
    clip-path:polygon(100% 0,100% 30%,70% 100%,0 100%,0 0);
    transform:rotate(10deg) translate(10px,-10px);
  }
  .pulse-circle{
    width:120px;height:120px;border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    margin:0 auto 8px;
    overflow:hidden;
    background:rgba(194,94,50,.07);
  }
  .water{
    position:absolute;
    inset:0;
    background:radial-gradient(circle at 40% 40%,rgba(194,94,50,.25),rgba(194,94,50,0)80%);
    opacity:0.7;
    filter:blur(6px);
    transition:all .4s;
    border-radius:50%;
  }
  .compass{
    position:relative;
    width:220px;
    height:220px;
    margin:0 auto;
  }
  .peer-feed{
    display:flex;
    flex-direction:column;
    gap:8px;
    font-size:.85em;
    margin-top:6px;
  }
  .peer-item{
    background:rgba(26,20,35,.04);
    padding:8px 14px;
    border-radius:8px;
    position:relative;
    overflow:hidden;
  }
  .cursor-trail{
    position:fixed;
    top:0;left:0;
    pointer-events:none;
    mix-blend-mode:normal;
  }
  .echo{
    position:absolute;
    inset:0;
    pointer-events:none;
  }
  .tag{
    display:inline-block;
    background:rgba(194,94,50,.08);
    padding:5px 12px;
    border-radius:999px;
    margin-right:6px;
    margin-bottom:6px;
    font-size:.65em;
    font-weight:600;
  }
  .small{
    font-size:.8em;
    color:rgba(26,20,35,.7);
  }
  .connection-canvas{
    width:100%;
    height:240px;
    border-radius:16px;
    background:rgba(255,249,244,.9);
    margin-top:6px;
    position:relative;
    overflow:hidden;
  }
  .commit-path{
    width:100%;
    height:220px;
  }
</style>
</head>
<body>

  <!-- brush cursor overlay -->
  <canvas id="brushCanvas" class="cursor-trail"></canvas>

  <div class="section">
    <div class="panel" style="clip-path:path('M30 10 Q5 75 40 120 Q100 140 170 110 Q220 80 190 30 Q160 5 110 20 Q70 0 30 10Z');">
      <div class="label">Portfolio</div>
      <div style="display:flex;flex-wrap:wrap;gap:24px;">
        <div style="flex:1;min-width:280px;">
          <h1 class="handdrawn-title">10 Surprising Design Ideas</h1>
          <p class="subtitle">Each section below is a standalone mockup—combining psychology signals with painterly interaction, unexpected flows, and tactile metaphors. No boring rectangles.</p>
          <div>
            <span class="pill">Magnetic Canvas</span>
            <span class="pill">Commitment Path</span>
            <span class="pill">Reflection Echo</span>
            <span class="pill">Breath Ritual</span>
          </div>
        </div>
        <div style="flex:none;align-self:start;">
          <button class="btn">Explore</button>
        </div>
      </div>
    </div>

    <!-- 1. Magnetic Connection Canvas -->
    <div class="section" id="mockup1">
      <div class="label">1 / Magnetic Connection Canvas</div>
      <div class="panel" style="clip-path:path('M10 50 Q30 0 80 10 Q150 0 180 60 Q210 120 160 150 Q120 160 80 140 Q40 130 10 50Z');">
        <div style="display:flex;gap:20px;flex-wrap:wrap;">
          <div style="flex:1;min-width:260px;">
            <h2>Central Resonance</h2>
            <p>Twoje imię to centralna kałuża farby. Ruch kursora przyciąga/odpycha inne „historie” — one mieszają kolory, rezonują i ujawniają mikro-opowieści po kliknięciu. Wizyjny metafor połączeń.</p>
            <div class="small">Kliknij kropkę, by odsłonić historię; przeciągnij, by eksperymentować z przyciąganiem.</div>
            <div style="margin-top:12px;"><strong>Ostatnio rezonujące:</strong> <span id="magnetRecent">—</span></div>
          </div>
          <div style="flex:1;min-width:340px;position:relative;">
            <canvas id="magneticCanvas" class="connection-canvas"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- 2. Brush Cursor / Painterly Reveal -->
    <div class="section" id="mockup2">
      <div class="label">2 / Brush Cursor & Reveal</div>
      <div class="panel" style="clip-path:path('M20 20 Q10 90 60 130 Q140 140 190 100 Q230 60 190 20 Q150 0 100 10 Q60 5 20 20Z');">
        <h2 class="handdrawn-title">Malujesz stronę</h2>
        <p>Twój kursor zostawia subtelne ślady jak pędzel rozprowadzający pigment. Zbliżenie do elementów wzmacnia ślad, kliknięcie „rozpływa” farbę i ujawnia podpowiedzi.</p>
        <div class="small">To nie tylko kursor, to twoje interaktywne odciski obecności.</div>
      </div>
    </div>

    <!-- 3. Commitment Path as Flowing Stroke -->
    <div class="section" id="mockup3">
      <div class="label">3 / Commitment Path</div>
      <div class="panel" style="clip-path:path('M25 30 Q40 5 110 20 Q180 10 220 55 Q260 100 220 140 Q180 160 120 150 Q70 140 25 110Z');">
        <div style="display:flex;gap:18px;flex-wrap:wrap;">
          <div style="flex:1;min-width:260px;">
            <h2>Zobowiązanie jako ścieżka</h2>
            <p>Zobowiązania pokazane jako pojedynczy, organiczny pociągnięcie pędzla. Każdy krok to plamka: wykonany wysycha, pominięty delikatnie pęka. Przechodzisz drogę, nie klikasz pudełka.</p>
            <div style="margin-top:8px;">
              <button class="btn" onclick="startDemoCommit()">Zablokuj mały krok</button>
              <span class="tag" id="commitState">Brak</span>
            </div>
          </div>
          <div style="flex:1;min-width:340px;position:relative;">
            <svg class="commit-path" viewBox="0 0 800 220" id="commitSvg">
              <path d="M30 160 C150 60 300 260 420 140 S700 80 770 150" stroke="rgba(194,94,50,0.8)" stroke-width="18" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="1000" stroke-dashoffset="1000"/>
              <!-- nodes -->
              <circle cx="40" cy="155" r="12" fill="#C25E32" class="node" data-step="1"/>
              <circle cx="200" cy="100" r="12" fill="#C25E32" class="node" data-step="2"/>
              <circle cx="360" cy="180" r="12" fill="#C25E32" class="node" data-step="3"/>
              <circle cx="520" cy="140" r="12" fill="#C25E32" class="node" data-step="4"/>
              <circle cx="680" cy="110" r="12" fill="#C25E32" class="node" data-step="5"/>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- 4. Reflection Echo Overlay -->
    <div class="section" id="mockup4">
      <div class="label">4 / Reflection Echo</div>
      <div class="panel" style="clip-path:path('M30 40 Q60 10 120 20 Q200 15 230 70 Q260 130 210 160 Q150 180 90 150 Q40 120 30 40Z');">
        <h2>Twoje poprzednie myśli jako echo</h2>
        <p>Wpisujesz refleksję. Po chwili pojawia się delikatne „echo” – rozmyty pociągnięty pędzel, który przypomina, że to już było. Jeśli powtarzasz temat, echo łączy się w większy plamisty wzór.</p>
        <div style="display:flex;gap:18px;flex-wrap:wrap;">
          <div style="flex:1;min-width:260px;">
            <textarea id="echoInput" rows="3" placeholder="Np. Czuję się wyobcowany..." ></textarea>
            <div style="margin-top:8px;"><small>Wpisz to ponownie za chwilę, echo się pogłębi.</small></div>
          </div>
          <div style="flex:1;min-width:260px;position:relative;">
            <div style="position:relative;width:100%;height:160px;">
              <canvas id="echoCanvas" style="width:100%;height:100%;border-radius:14px;background:rgba(248,244,239,1);"></canvas>
              <div style="position:absolute;bottom:8px;left:12px;font-size:.75em;color:rgba(26,20,35,.6);">Echo:</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 5. Value Compass -->
    <div class="section" id="mockup5">
      <div class="label">5 / Value Compass</div>
      <div class="panel" style="clip-path:path('M10 50 Q40 10 100 20 Q160 0 200 60 Q230 120 200 160 Q140 180 80 150 Q30 130 10 50Z');">
        <div style="display:flex;gap:22px;flex-wrap:wrap;">
          <div style="flex:1;min-width:300px;">
            <h2>Głębia vs Tempo</h2>
            <p>Przesuń suwak. Kompas pokazuje, w którą stronę twoje napięcie się przesuwa i sugeruje rodzaj doświadczenia.</p>
            <input id="compassSlider" type="range" min="0" max="100" value="50" style="width:100%;margin-top:6px;">
            <div style="margin-top:10px;"><strong>Rekomendacja:</strong> <span id="compassRec">—</span></div>
          </div>
          <div style="flex:1;min-width:220px;">
            <div class="compass" id="compassWidget">
              <canvas id="compassCanvas2" width="220" height="220" style="border-radius:50%;"></canvas>
              <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;">
                <div style="font-weight:700;">Ty</div>
                <div style="font-size:.65em;">Preferencje</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 6. Breath Sync with Watercolor Ripple -->
    <div class="section" id="mockup6">
      <div class="label">6 / Breath Sync Ritual</div>
      <div class="panel" style="clip-path:path('M30 20 Q70 5 140 35 Q200 60 220 120 Q230 170 190 180 Q140 190 90 160 Q50 130 30 90Z');">
        <div style="display:flex;gap:20px;flex-wrap:wrap;align-items:center;">
          <div style="flex:1;min-width:220px;">
            <h2>Synchronizacja oddechu</h2>
            <p>Wdech / wydech pokazany przez rozlewający się akwarelowy krąg. Po 60s wyświetla się koherencja i sugestia.</p>
            <div class="pulse-circle" id="breathCircle">
              <div class="water" id="breathWater"></div>
              <div style="position:relative;font-weight:700;color:var(--dark);" id="breathLabel">Start</div>
            </div>
            <div style="display:flex;gap:12px;flex-wrap:wrap;">
              <button class="btn" id="startBreathBtn">Start 60s</button>
              <div class="small" id="breathScore">—</div>
            </div>
          </div>
          <div style="flex:1;min-width:240px;">
            <div><strong>Sugestia po sesji:</strong> <div id="breathSuggestion">—</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- 7. Digital vs Real Contrast Painterly Blend -->
    <div class="section" id="mockup7">
      <div class="label">7 / Digital vs Real Contrast</div>
      <div class="panel" style="clip-path:path('M25 40 Q75 10 130 20 Q210 10 240 70 Q270 140 200 170 Q140 180 80 160 Q40 140 25 40Z');">
        <h2>Co wybierasz teraz?</h2>
        <p>Przeciągnij suwak, by płynnie blendować hałas cyfrowy z realną obecnością. Farba przenika, pokazując, co zyskujesz i co tracisz.</p>
        <div style="display:flex;gap:18px;flex-wrap:wrap;">
          <div style="flex:1;min-width:260px;">
            <input type="range" id="contrastSlider" min="0" max="100" value="50">
            <div style="margin-top:8px;">
              <div class="small">Przeciągnij, aby zobaczyć blend</div>
            </div>
          </div>
          <div style="flex:2;min-width:320px;display:flex;gap:12px;">
            <div class="contrast-half" style="background:#fff9f4;">
              <div style="font-weight:600;margin-bottom:6px;">Online</div>
              <p>Scroll, powiadomienia, przerywane uwagi.</p>
              <div class="small">Tracisz obecność, zyskujesz dystrakcję.</div>
            </div>
            <div class="contrast-half" style="background:#f9f8f6;mix-blend-mode:normal;">
              <div style="font-weight:600;margin-bottom:6px;">Realnie</div>
              <p>Rozmowa z sensem, głęboka obecność, cisza między słowami.</p>
              <div class="small">Zyskujesz relację, tracisz sztuczność.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 8. Peer Pulse as Hand-drawn Feed -->
    <div class="section" id="mockup8">
      <div class="label">8 / Peer Pulse Feed</div>
      <div class="panel" style="clip-path:path('M40 30 Q30 5 90 10 Q180 0 220 60 Q260 120 210 150 Q140 170 80 140 Q40 110 40 30Z');">
        <h2>Inni robią krok</h2>
        <p>Social proof bez presji: ręcznie rysowane notatki przesuwają się, pokazując, co robią inni podobni do ciebie. Lekka adaptacja rekomendacji.</p>
        <div class="peer-feed" id="peerFeedMock">
          <!-- dynamic items -->
        </div>
        <div style="margin-top:10px;"><strong>Podpowiedź:</strong> <span id="peerRec">Zacznij od krótkiego zaproszenia.</span></div>
      </div>
    </div>

    <!-- 9. Future Self Snapshot with Fold -->
    <div class="section" id="mockup9">
      <div class="label">9 / Future Self Snapshot</div>
      <div class="future-card">
        <div class="fold"></div>
        <div style="flex:1;min-width:220px;">
          <h2>Twoje przyszłe ja</h2>
          <p>Wpisz krótko: co chcesz poczuć jutro. Dwa obrazy: jeśli zrobisz → zysk, jeśli nie → echo starego wzorca.</p>
          <textarea id="futureInput" rows="2" placeholder="Za 24h chcę czuć, że nawiązałem kontakt..."></textarea>
        </div>
        <div style="flex:1;min-width:180px;">
          <div><strong>Jeśli zrobisz:</strong></div>
          <div class="tag" id="futureIfDone">Większa spójność</div>
        </div>
        <div style="flex:1;min-width:180px;">
          <div><strong>Jeśli nie:</strong></div>
          <div class="tag" id="futureIfNot">Stagnacja</div>
        </div>
        <div style="width:100%;margin-top:8px;">
          <button class="btn" id="lockFutureBtn">Zablokuj przypomnienie</button>
          <span class="small" id="futureStatus">—</span>
        </div>
      </div>
    </div>

    <!-- 10. Summary / Superior Call-to-Action -->
    <div class="section" id="mockup10">
      <div class="label">10 / Superior Synthesis</div>
      <div class="panel" style="clip-path:path('M20 40 Q50 5 120 15 Q200 0 240 65 Q280 140 220 170 Q150 190 90 160 Q50 130 20 40Z');">
        <h2>Co teraz?</h2>
        <p>Wszystkie sygnały składają się w rekomendację. Nie daj się rutynie — zrób kolejny malutki krok i zobacz, jak farba twojej historii rozrasta się w coś realnego.</p>
        <div style="display:flex;gap:16px;flex-wrap:wrap;">
          <div style="flex:1;min-width:220px;">
            <div class="tag">Empathy</div>
            <div class="tag">Reflect</div>
            <div class="tag">Commit</div>
          </div>
          <div style="flex:none;">
            <button class="btn">Zobowiąż się teraz</button>
          </div>
        </div>
        <div style="margin-top:12px;">
          <strong>Rekomendacja:</strong> <span id="finalRec">Zacznij od refleksji i oddechu.</span>
        </div>
      </div>
    </div>

  </div>

  <script>
    // brush cursor trail
    const brush = document.getElementById('brushCanvas');
    const bctx = brush.getContext('2d');
    function resizeBrush(){brush.width=window.innerWidth;brush.height=window.innerHeight;}
    window.addEventListener('resize',resizeBrush);
    resizeBrush();
    let lastPos=null;
    document.addEventListener('pointermove',e=>{
      if(lastPos){
        const dx=e.clientX-lastPos.x, dy=e.clientY-lastPos.y;
        const dist=Math.hypot(dx,dy);
        const steps=Math.ceil(dist/4);
        for(let i=0;i<steps;i++){
          const t=i/steps;
          const x=lastPos.x + dx*t;
          const y=lastPos.y + dy*t;
          const radius=5 + Math.sin(performance.now()/400)*2;
          bctx.fillStyle='rgba(194,94,50,0.06)';
          bctx.beginPath();
          bctx.arc(x,y,radius,0,Math.PI*2);
          bctx.fill();
        }
      }
      lastPos={x:e.clientX,y:e.clientY};
      // decay
      bctx.globalCompositeOperation='destination-out';
      bctx.fillStyle='rgba(240,230,210,0.02)';
      bctx.fillRect(0,0,brush.width,brush.height);
      bctx.globalCompositeOperation='source-over';
    });

    // 1. Magnetic Connection Canvas
    const magCanvas = document.getElementById('magneticCanvas');
    const mctx = magCanvas.getContext('2d');
    let mw, mh;
    let magNodes = [];
    function resizeMag(){mw=magCanvas.clientWidth; mh=magCanvas.clientHeight; magCanvas.width=mw*devicePixelRatio; magCanvas.height=mh*devicePixelRatio; mctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);}
    function initMag(){
      magNodes = [];
      const stories=["Ktoś mnie usłyszał.","Czuję realne połączenie.","Nie chcę udawać.","Rozmowa dała mi oddech.","Chcę więcej autentyczności."];
      for(let i=0;i<7;i++){
        magNodes.push({
          x: Math.random()*(mw-60)+30,
          y: Math.random()*(mh-60)+30,
          vx:(Math.random()-0.5)*1,
          vy:(Math.random()-0.5)*1,
          r:10 + Math.random()*6,
          story: stories[i%stories.length],
          hits:0,
          isCenter:false,
          color:`hsl(${Math.random()*40+10},70%,60%)`
        });
      }
      magNodes.push({
        x:mw/2,y:mh/2,vx:0,vy:0,r:22,story:'Ty (w centrum)',hits:0,isCenter:true,color:'#C25E32'
      });
    }
    let mpointer={x:null,y:null};
    magCanvas.addEventListener('mousemove',e=>{
      const rect=magCanvas.getBoundingClientRect();
      mpointer.x=e.clientX-rect.left;
      mpointer.y=e.clientY-rect.top;
    });
    magCanvas.addEventListener('mouseleave',()=>{mpointer.x=null;mpointer.y=null;});
    magCanvas.addEventListener('click',e=>{
      const rect=magCanvas.getBoundingClientRect();
      const mx=e.clientX-rect.left;
      const my=e.clientY-rect.top;
      for(const n of magNodes){
        const dx=mx-n.x, dy=my-n.y;
        if(Math.hypot(dx,dy) < n.r+5 && !n.isCenter){
          n.hits++;
          document.getElementById('magnetRecent').textContent=n.story;
        }
      }
    });
    function updateMag(){
      for(const n of magNodes){
        if(!n.isCenter){
          const center=magNodes.find(o=>o.isCenter);
          const dx=center.x-n.x;
          const dy=center.y-n.y;
          const d=Math.hypot(dx,dy);
          if(d>0){n.vx += (dx/d)*0.002;}
        }
        if(mpointer.x!=null){
          const dx=mpointer.x - n.x;
          const dy=mpointer.y - n.y;
          const d=Math.hypot(dx,dy);
          if(d<90){
            const repel=(90-d)/90*0.3;
            n.vx -= (dx/d)*repel; n.vy -= (dy/d)*repel;
          }
        }
        n.x += n.vx; n.y += n.vy;
        n.vx *= 0.9; n.vy *= 0.9;
        // bounds
        if(n.x < n.r) n.x=n.r;
        if(n.x > mw - n.r) n.x=mw-n.r;
        if(n.y < n.r) n.y=n.r;
        if(n.y > mh - n.r) n.y=mh-n.r;
      }
    }
    function drawMag(){
      mctx.clearRect(0,0,mw,mh);
      // connections
      for(const a of magNodes){
        for(const b of magNodes){
          if(a===b) continue;
          const dx=a.x-b.x, dy=a.y-b.y;
          const d=Math.hypot(dx,dy);
          if(d<120){
            mctx.strokeStyle=`rgba(90,139,124,${(120-d)/180})`;
            mctx.lineWidth=1;
            mctx.beginPath();
            mctx.moveTo(a.x,a.y);
            mctx.lineTo(b.x,b.y);
            mctx.stroke();
          }
        }
      }
      for(const n of magNodes){
        mctx.save();
        mctx.beginPath();
        mctx.arc(n.x,n.y,n.r,0,Math.PI*2);
        if(n.isCenter){
          mctx.fillStyle=n.color;
          mctx.shadowBlur=20;
          mctx.shadowColor='rgba(194,94,50,.4)';
        } else {
          mctx.fillStyle=n.color;
          mctx.shadowBlur=8;
          mctx.shadowColor='rgba(31,74,54,.25)';
        }
        mctx.fill();
        mctx.restore();
      }
    }
    function loopMag(){updateMag();drawMag();requestAnimationFrame(loopMag);}
    function initMagAll(){resizeMag();initMag();loopMag();}
    window.addEventListener('resize',()=>{resizeMag();});
    initMagAll();

    // 3. Commitment Path animation
    const commitPath = document.querySelector('#commitSvg path');
    const nodes = document.querySelectorAll('#commitSvg .node');
    let commitActive = false;
    function startDemoCommit(){
      if(commitActive) return;
      commitActive=true;
      document.getElementById('commitState').textContent="Zablokowane";
      // draw path
      commitPath.style.transition='stroke-dashoffset 1.4s ease-out';
      commitPath.style.strokeDashoffset='0';
      // sequentially mark nodes
      let i=0;
      const interval = setInterval(()=>{
        if(i>=nodes.length){ clearInterval(interval); return; }
        nodes[i].setAttribute('fill','#5A8B7C');
        i++;
      },400);
      setTimeout(()=>{document.getElementById('commitState').textContent="Wykonane";},2500);
    }

    // 5. Value Compass logic
    const compassSlider = document.getElementById('compassSlider');
    const compassRec = document.getElementById('compassRec');
    const canvas2 = document.getElementById('compassCanvas2');
    const ctx2 = canvas2.getContext('2d');
    function drawCompass2(val){
      const size=220;
      ctx2.clearRect(0,0,size,size);
      const cx=size/2, cy=size/2;
      ctx2.fillStyle='rgba(248,244,239,1)';
      ctx2.beginPath(); ctx2.arc(cx,cy,80,0,Math.PI*2); ctx2.fill();
      const depth=val/100;
      const angle=(135 - depth*90)*Math.PI/180;
      ctx2.strokeStyle='rgba(194,94,50,0.9)';
      ctx2.lineWidth=10;
      ctx2.lineCap='round';
      ctx2.beginPath();
      ctx2.moveTo(cx,cy);
      ctx2.lineTo(cx + Math.cos(angle)*60, cy - Math.sin(angle)*60);
      ctx2.stroke();
      ctx2.fillStyle= "#1A1423";
      ctx2.font="14px serif";
      ctx2.textAlign="center";
      ctx2.fillText(depth>0.6? "Głębia":"Tempo", cx, cy+105);
    }
    function updateCompassRec(){
      const v = Number(compassSlider.value);
      if(v>65) compassRec.textContent="Zacznij od głębokiego doświadczenia.";
      else if(v<35) compassRec.textContent="Krótka integracja da lepszy start.";
      else compassRec.textContent="Hybrydowe wejście najlepiej zadziała.";
      drawCompass2(v);
      document.getElementById('finalRec').textContent = compassRec.textContent;
    }
    compassSlider.addEventListener('input',updateCompassRec);
    updateCompassRec();

    // 6. Breath sync
    const startBreathBtn = document.getElementById('startBreathBtn');
    const breathWater = document.getElementById('breathWater');
    const breathLabel = document.getElementById('breathLabel');
    const breathSuggestion = document.getElementById('breathSuggestion');
    const breathScore = document.getElementById('breathScore');
    let breathInterval;
    startBreathBtn.addEventListener('click',()=>{
      clearInterval(breathInterval);
      let start=Date.now();
      let phase=0;
      breathLabel.textContent="Wdech";
      breathSuggestion.textContent="";
      breathScore.textContent="";
      breathInterval = setInterval(()=>{
        const elapsed=(Date.now()-start)/1000;
        const cycle=10;
        const mod=elapsed%cycle;
        if(mod<4){
          breathLabel.textContent="Wdech";
          breathWater.style.transform="scale(1.1)";
          breathWater.style.opacity="0.7";
        } else {
          breathLabel.textContent="Wydech";
          breathWater.style.transform="scale(0.85)";
          breathWater.style.opacity="0.5";
        }
        if(elapsed>=60){
          clearInterval(breathInterval);
          breathLabel.textContent="Gotowe";
          const scoreVal=Math.round(65 + Math.random()*30);
          breathScore.textContent=`Koherencja: ${scoreVal}/100`;
          breathSuggestion.textContent = scoreVal>80 ? "Jesteś zrelaksowany. Idź dalej." : "Zrób jeszcze krótki reset.";
          document.getElementById('finalRec').textContent = breathSuggestion.textContent;
        }
      },200);
    });

    // 7. Contrast slider
    const contrastSlider = document.getElementById('contrastSlider');
    contrastSlider.addEventListener('input',e=>{
      const v = Number(e.target.value)/100;
      // adjust blend transparency to simulate choice
      document.querySelectorAll('.contrast-half')[0].style.opacity = 1 - v*0.6;
      document.querySelectorAll('.contrast-half')[1].style.opacity = 1 - (1-v)*0.6;
    });
    contrastSlider.dispatchEvent(new Event('input'));

    // 8. Peer Pulse feed mock
    const peerFeedMock = document.getElementById('peerFeedMock');
    const peerRec = document.getElementById('peerRec');
    const peerMsgs = [
      "62% zaczęło od oddechu.",
      "47% napisało krótką refleksję.",
      "33% ustawiło wartości przed rozmową.",
      "51% zrobiło micro-commit.",
      "29% przypomniało przyszłe ja."
    ];
    function updatePeer(){
      const msg = peerMsgs[Math.floor(Math.random()*peerMsgs.length)];
      const d = document.createElement('div');
      d.className='peer-item';
      d.textContent=msg;
      peerFeedMock.prepend(d);
      if(peerFeedMock.children.length>5) peerFeedMock.removeChild(peerFeedMock.lastChild);
      peerRec.textContent = Math.random()>0.5? "Zacznij od zaproszenia." : "Zrób oddech przed krokiem.";
      document.getElementById('finalRec').textContent = peerRec.textContent;
    }
    setInterval(updatePeer,3000);
    updatePeer();

    // 9. Future self snapshot
    const futureInput = document.getElementById('futureInput');
    const futureIfDone = document.getElementById('futureIfDone');
    const futureIfNot = document.getElementById('futureIfNot');
    const lockFutureBtn = document.getElementById('lockFutureBtn');
    const futureStatus = document.getElementById('futureStatus');
    futureInput.addEventListener('input',()=>{
      const v = futureInput.value.trim();
      futureIfDone.textContent = v? "Poczujesz postęp." : "Wpisz intencję.";
      futureIfNot.textContent = v? "Może wrócić stary wzorzec." : "Wpisz intencję.";
    });
    lockFutureBtn.addEventListener('click',()=>{
      if(!futureInput.value.trim()) return;
      futureStatus.textContent="Zablokowane (przypomnienie w sesji za 24h)";
      setTimeout(()=>{ alert("Przyszłe ja: Czy zrobiłeś krok?"); },24*60*60*1000);
    });

    // 4. Reflection Echo logic
    const echoInput = document.getElementById('echoInput');
    const echoCanvas = document.getElementById('echoCanvas');
    const ectx = echoCanvas.getContext('2d');
    let echoes = [];
    function drawEcho(){
      ectx.clearRect(0,0,echoCanvas.width,echoCanvas.height);
      echoes.forEach((e,i)=>{
        ectx.save();
        ectx.globalAlpha = 0.15 + Math.min(0.4, e.count * 0.1);
        ectx.fillStyle = 'rgba(194,94,50,0.2)';
        ectx.beginPath();
        ectx.ellipse(e.x, e.y, 60 + e.count*6, 40 + e.count*4, Math.PI/6, 0, Math.PI*2);
        ectx.fill();
        ectx.restore();
      });
    }
    function captureEcho(text){
      if(!text.trim()) return;
      // add new echo in random spot
      echoes.push({x: Math.random()*(echoCanvas.clientWidth-100)+50, y: Math.random()*(echoCanvas.clientHeight-100)+50, count:1});
      // merge if similar repeated recently
      if(echoes.length>1){
        const last = echoes[echoes.length-2];
        if(Math.abs(echoes[echoes.length-1].x - last.x) < 50){
          last.count +=1;
          echoes.pop();
        }
      }
      drawEcho();
    }
    echoInput.addEventListener('blur', ()=>{
      captureEcho(echoInput.value);
      setTimeout(()=>{ echoInput.value=''; },300);
    });
    // initial size for echo canvas
    function resizeEcho(){ echoCanvas.width=echoCanvas.clientWidth*devicePixelRatio; echoCanvas.height=echoCanvas.clientHeight*devicePixelRatio; ectx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);}
    window.addEventListener('resize',resizeEcho);
    resizeEcho();
    drawEcho();

    // Combined suggestion simple periodic glue
    setInterval(()=>{
      // nothing heavy; left as demo
    },5000);
  </script>
</body>
</html>
